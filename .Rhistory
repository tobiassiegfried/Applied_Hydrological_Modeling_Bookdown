P_38471 <- loadTabularData(fPath,'38471_P_decadal.csv',38471,'Chatkal Meteo Station','Chatkal','Chirchik','P','mm')
T_38471 <- loadTabularData(fPath,'38471_T_decadal.csv',38471,'Chatkal Meteo Station','Chatkal','Chirchik','T','degC')
# Assemble the data
data.PT <- P_38462
data.PT <- bind_rows(data.PT,T_38462,P_38464,P_38471,T_38471)
data.PT %>% group_by(code,type) %>% plot_time_series(date,data,.facet_ncol = 1,.interactive = FALSE)
data <- bind_rows(data.Q,data.PT)
data %>% filter(type=='Q') %>% group_by(type,code,station) %>% plot_time_series(date,data,.facet_ncol = 2,.interactive = FALSE)
gaugingStationData <- data.Q %>% select(code) %>% unique()
gaugingStationData$lon_UTM42 <- c(
598278,
597351,
584616,
589674,
578612,
479463,
564916)
gaugingStationData$lat_UTM42 <- c(
4596628,
4622724,
4609108,
4618690,
4610070,
4528236,
4602785)
gaugingStationData$altitude_masl <- c(
953,
911,
864,
941,
759,
254,
681)
gaugingStationData$basinSize_sqkm <- c(
5677829056,
2521388472,
9999165900,
98555481,
864946131,
13112062045,
11139775526)
gaugingStationData$basinSize_sqkm <- gaugingStationData$basinSize_sqkm / 10^6
gaugingStationData
data <- full_join(data,gaugingStationData,by='code')
ChirchikRiverBasin <- data
fLoc <- '/Users/tobiassiegfried/Dropbox (hydrosolutions)/1_HSOL_PROJECTS/PROJECTS/SDC/DKU_WRM_COURSE_CA/Course Materials/Handbook/Applied_Hydrological_Modeling_Bookdown/data/ChirchikRiverBasin.rda'
saveRDS(ChirchikRiverBasin,fLoc)
library(tidyverse)
library(lubridate)
library(timetk)
library(DataExplorer)
library(riversCentralAsia)
ChirchikRiverBasin # load data
?ChirchikRiverBasin
data <- ChirchikRiverBasin
data %>% filter(type=='Q') %>% group_by(type,code,station,resolution) %>% plot_time_series(date,data,.facet_ncol = 2,.interactive = FALSE, .smooth = FALSE, .title = 'Available discharge data of Chirchik River Basin')
data_stats <- data %>% filter(type == 'Q') %>%
dplyr::select(date,data,code) %>% group_by(code) %>%
summarise(mean = mean(data,na.rm=TRUE),
min = min(data,na.rm=TRUE),
max = max(data,na.rm=TRUE),
sd = sd(data,na.rm=TRUE),.groups = 'keep')
data_stats %>% ungroup()
data %>% filter(type=='Q',code!='16275',code!='16294',code!='16300',code!='16262') %>%
dplyr::select(date,data,code) %>%
group_by(code) %>%
plot_seasonal_diagnostics(.date_var = date,.value = data,.interactive = FALSE,.feature_set = c("week","month.lbl"))
data %>% filter(type=='Q',code!='16279',code!='16298',code!='16290',code!='16294') %>%
dplyr::select(date,data,code) %>%
group_by(code) %>%
plot_seasonal_diagnostics(.date_var = date,.value = data,.interactive = FALSE,.feature_set = c("month.lbl"))
fPath <- '/Users/tobiassiegfried/Dropbox (hydrosolutions)/1_HSOL_PROJECTS/PROJECTS/SDC/DKU_WRM_COURSE_CA/Course Materials/Data/Q/UZB/'
## Chatkal River, Khudaydod
Q_16279 <- loadTabularData(fPath,'16279_decadal.csv',16279,'Khudaydod','Chatkal','Chirchik','Q','m3s')
## Pskem River, Mullala
Q_16290 <- loadTabularData(fPath,'16290_decadal.csv',16290,'Mullala', 'Pskem','Chirchik','Q','m3s')
## Inflow Charvak
Q_16294 <- loadTabularData(fPath,'16294_decadal.csv',16294,'Charvak','Chatkal','Chirchik','Q','m3s')
## Nauvalisoy River, Sidzhak
Q_16298 <- loadTabularData(fPath,'16298_decadal.csv',16298,'Sidzhak','Nauvalisoy','Chirchik','Q','m3s')
## Chirchik River, Chinaz
Q_16275 <- loadTabularData(fPath,'16275_monthly.csv',16275,'Chinaz','Chirchik','Chirchik','Q','m3s')
## Ugam River, Khodizhikent
Q_16300 <- loadTabularData(fPath,'16300_monthly.csv',16300,'Khodzhikent','Ugam','Chirchik','Q','m3s')
## Chirchik, Gazalkent
Q_16262 <- loadTabularData(fPath,'16262_monthly.csv',16262,'Gazalkent','Chirchik','Chirchik','Q','m3s')
# Assemble the data
data.Q <- Q_16279
data.Q <- bind_rows(data.Q,Q_16290,Q_16294,Q_16298,Q_16300,Q_16275,Q_16262)
data.Q %>% group_by(code,type,resolution) %>% plot_time_series(date,data,.facet_ncol = 2,.interactive = FALSE)
fPath <- '/Users/tobiassiegfried/Dropbox (hydrosolutions)/1_HSOL_PROJECTS/PROJECTS/SDC/DKU_WRM_COURSE_CA/Course Materials/Data/METEO/UZB/'
## Pskem Meteo Station
P_38462 <- loadTabularData(fPath,'38462_P_decadal.csv',38462,'Pskem Meteo Station','Pskem','Chirchik','P','mm')
T_38462 <- loadTabularData(fPath,'38462_T_decadal.csv',38462,'Pskem Meteo Station','Pskem','Chirchik','T','degC')
## Charvak Reservoir Meteo Station
P_38464 <- loadTabularData(fPath,'38464_P_decadal.csv',38464,'Charvak Reservoir Meteo Station','Chirchik','Chirchik','P','mm')
## Chatkal Meteo Station
P_38471 <- loadTabularData(fPath,'38471_P_decadal.csv',38471,'Chatkal Meteo Station','Chatkal','Chirchik','P','mm')
T_38471 <- loadTabularData(fPath,'38471_T_decadal.csv',38471,'Chatkal Meteo Station','Chatkal','Chirchik','T','degC')
# Assemble the data
data.PT <- P_38462
data.PT <- bind_rows(data.PT,T_38462,P_38464,P_38471,T_38471)
data.PT %>% group_by(code,type) %>% plot_time_series(date,data,.facet_ncol = 1,.interactive = FALSE)
data <- bind_rows(data.Q,data.PT)
data %>% filter(type=='Q') %>% group_by(type,code,station) %>% plot_time_series(date,data,.facet_ncol = 2,.interactive = FALSE)
gaugingStationData <- data.Q %>% select(code) %>% unique()
gaugingStationData$lon_UTM42 <- c(
598278,
597351,
584616,
589674,
578612,
479463,
564916)
gaugingStationData$lat_UTM42 <- c(
4596628,
4622724,
4609108,
4618690,
4610070,
4528236,
4602785)
gaugingStationData$altitude_masl <- c(
953,
911,
864,
941,
759,
254,
681)
gaugingStationData$basinSize_sqkm <- c(
5677829056,
2521388472,
9999165900,
98555481,
864946131,
13112062045,
11139775526)
gaugingStationData$basinSize_sqkm <- gaugingStationData$basinSize_sqkm / 10^6
gaugingStationData
data <- full_join(data,gaugingStationData,by='code')
ChirchikRiverBasin <- data
fLoc <- '/Users/tobiassiegfried/Dropbox (hydrosolutions)/1_HSOL_PROJECTS/PROJECTS/SDC/DKU_WRM_COURSE_CA/Course Materials/Handbook/Applied_Hydrological_Modeling_Bookdown/data/ChirchikRiverBasin.rda'
saveRDS(ChirchikRiverBasin,fLoc)
library(tidyverse)
library(lubridate)
library(timetk)
library(DataExplorer)
library(riversCentralAsia)
knitr::include_graphics('_bookdown_files/Chap6-Figures/ChirchikRiverBasin_Annotated_lr.jpg')
ChirchikRiverBasin # load data
?ChirchikRiverBasin
data <- ChirchikRiverBasin
data %>% filter(type=='Q') %>% group_by(type,code,station,resolution) %>% plot_time_series(date,data,.facet_ncol = 2,.interactive = FALSE, .smooth = FALSE, .title = 'Available discharge data of Chirchik River Basin')
data_stats <- data %>% filter(type == 'Q') %>%
dplyr::select(date,data,code) %>% group_by(code) %>%
summarise(mean = mean(data,na.rm=TRUE),
min = min(data,na.rm=TRUE),
max = max(data,na.rm=TRUE),
sd = sd(data,na.rm=TRUE),.groups = 'keep')
data_stats %>% ungroup()
data %>% filter(type=='Q',code!='16275',code!='16294',code!='16300',code!='16262') %>%
dplyr::select(date,data,code) %>%
group_by(code) %>%
plot_seasonal_diagnostics(.date_var = date,.value = data,.interactive = FALSE,.feature_set = c("week","month.lbl"))
data %>% filter(type=='Q',code!='16279',code!='16298',code!='16290',code!='16294') %>%
dplyr::select(date,data,code) %>%
group_by(code) %>%
plot_seasonal_diagnostics(.date_var = date,.value = data,.interactive = FALSE,.feature_set = c("month.lbl"))
bookdown:::serve_book()
knitr::include_graphics('_bookdown_files/Chap2-Figures/fig_CentralAsiaRiversMap.png')
knitr::include_graphics('_bookdown_files/Chap2-Figures/fig_GlacierElevationDistribution.png')
bookdown:::serve_book()
install.packages("tidyverse")
install.packages("lubridate")
install.packages("timetk")
install.packages("lubridate")
install.packages("timetk")
bookdown:::serve_book()
install.packages("tidyverse")
install.packages("lubridate")
install.packages("timetk")
install.packages("lubridate")
install.packages("timetk")
bookdown:::serve_book()
warnings()
install.packages('servr')
library(servr)
bookdown:::serve_book()
KoksuDischarge %>% plot_time_series()
KoksuDischarge %>% plot_time_series(.date_var = date)
KoksuDischarge %>% plot_time_series(.date_var = date,.value = data)
KoksuDischarge %>% select(code==`16279`) %>%  plot_time_series(.date_var = date,.value = data)
KoksuDischarge %>% filter(code==`16279`) %>%  plot_time_series(.date_var = date,.value = data)
KoksuDischarge %>% filter(code==16279) %>%  plot_time_series(.date_var = date,.value = data)
KoksuDischarge %>% filter(code==16279) %>%  plot_seasonal_diagnostics(.date_var = date,.value = data)
knitr::include_graphics('_bookdown_files/Chap6-Figures/ChirchikRiverBasin_Annotated_lr.jpg')
library(devtools)
library(tidyverse)
library(lubridate)
library(timetk)
library(DataExplorer)
library(riversCentralAsia)
knitr::include_graphics('_bookdown_files/Chap6-Figures/ChirchikRiverBasin_Annotated_lr.jpg')
serve_book()
bookdown:::serve_book()
KoksuDischarge # load Data
KoksuDischarge_wide <- KoksuDischarge %>% pivot_wider(id_cols = 'date',values_from = 'data',names_from = "code")
KoksuDischarge_wide
# Adding Koksu discharge to the dataframe
KoksuDischarge_wide <- KoksuDischarge_wide %>% mutate(Koksu = Charvak - `16279`)
KoksuDischarge_wide
# and visualize
ggplot(KoksuDischarge_wide, aes(`16279`, Koksu)) +
geom_point()
lm <- lm(Koksu ~ 0 + `16279`,KoksuDischarge_wide)
summary(lm)
warnings()
lm <- lm(Koksu ~ 0 + `16279`,KoksuDischarge_wide)
summary(lm)
ChirchikRiverBasin # load data
?ChirchikRiverBasin
ChirchikRiverBasin # load data
data <- ChirchikRiverBasin
data %>% filter(type=='Q') %>% group_by(type,code,station,resolution) %>% plot_time_series(date,data,.facet_ncol = 2,.interactive = FALSE, .smooth = FALSE, .title = 'Available discharge data of Chirchik River Basin')
# and visualize
ggplot(KoksuDischarge_wide, aes(`16279`, Koksu)) +
geom_point() +
xlab('Gauge 16279 Khudaydod [m^3/s]') +
ylab ('Koksu [m^3/s]')
# and visualize
ggplot(KoksuDischarge_wide, aes(`16279`, Koksu)) +
geom_point() +
xlab(bquote('Gauge 16279 Khudaydod ['~m^3/s])) +
# and visualize
ggplot(KoksuDischarge_wide, aes(`16279`, Koksu)) +
geom_point() +
xlab(bquote('Gauge 16279 Khudaydod ['~m^3/s']')) +
# and visualize
ggplot(KoksuDischarge_wide, aes(`16279`, Koksu)) +
geom_point() +
xlab(bquote('Discharge at Gauge 16279 Khudaydod in'~m^3/s)) +
ylab ('Koksu [m^3/s]')
# and visualize
ggplot(KoksuDischarge_wide, aes(`16279`, Koksu)) +
geom_point() +
xlab(bquote('Discharge at Gauge 16279 Khudaydod in'~m^3/s)) +
ylab (bquote('Discharge at Koksu in'~m^3/s))
# and visualize
ggplot(KoksuDischarge_wide, aes(`16279`, Koksu)) +
geom_point() +
xlab(bquote('Discharge at Gauge 16279 Khudaydod in'~m^3/s)) +
ylab (bquote('Koksu river discharge in'~m^3/s))
lm <- lm(Koksu ~ 0 + `16279`,KoksuDischarge_wide)
summary(lm)
bookdown::serve_book()
?bookdown
servr::daemon_list()
servr::daemon_stop("1")
servr::daemon_stop("2")
servr::daemon_list()
bookdown::serve_book()
data <- ChirchikRiverBasin
data %>% filter(type=='Q') %>% group_by(type,code,station,resolution) %>% plot_time_series(date,data,.facet_ncol = 2,.interactive = FALSE, .smooth = FALSE, .title = 'Available discharge data of Chirchik River Basin')
data_stats <- data %>% filter(type == 'Q') %>%
dplyr::select(date,data,code) %>% group_by(code) %>%
summarise(mean = mean(data,na.rm=TRUE),
min = min(data,na.rm=TRUE),
max = max(data,na.rm=TRUE),
sd = sd(data,na.rm=TRUE),.groups = 'keep')
data_stats %>% ungroup()
data %>% filter(code=='16262')
data %>% filter(code=='16262') %>% plot_time_series(.data=data,.date_var = date,.interactive = TRUE)
data %>% filter(code=='16262') %>% plot_time_series(date,,data,.interactive = TRUE)
data %>% filter(code=='16262') %>% plot_time_series(date,data,.interactive = TRUE)
?plot_time_series
data %>% filter(code=='16262') %>% plot_time_series(date,data,.interactive = TRUE,.smooth = FALSE)
data %>% filter(code=='16262') %>% plot_time_series(date,data,
.interactive = TRUE,
.smooth = FALSE,
.title = "Monthly discharge at Gauge 16262, Gazalkent",
.x_lab = 'date',
.y_lab = 'Discharge in cubic meters per second'
.plotly_slider = TRUE)
data %>% filter(code=='16262') %>% plot_time_series(date,data,
.interactive = TRUE,
.smooth = FALSE,
.title = "Monthly discharge at Gauge 16262, Gazalkent",
.x_lab = 'date',
.y_lab = 'Discharge in cubic meters per second',
.plotly_slider = TRUE)
knitr::opts_chunk$set(echo = TRUE)
remotes::install_github("r-spatial/rgee")
library(rgee)
ee_install()
n
install.packages('sf')
install.packages("sf")
?ee_install
knitr::opts_chunk$set(echo = TRUE)
#remotes::install_github("r-spatial/rgee")
#install.packages('sf')
library(sf)
library(rgee)
#ee_install()
#ee_install()
?ee_install()
servr::daemon_list()
bookdown::serve_book()
data %>% filter(code=='16262') %>%
collapse_by("year") %>%
group_by(date) %>%
summarize_all(sum)
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',sum())
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',sum()) %>%
plot_time_series(date,data,
.interactive = TRUE,
.smooth = FALSE,
.title = "Monthly discharge at Gauge 16262, Gazalkent",
.x_lab = 'date',
.y_lab = 'Discharge in cubic meters per second',
.plotly_slider = TRUE)
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',value=sum(value))) %>%
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',value=sum(value))) %>%
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',sum) %>%
plot_time_series(date,data,
.interactive = TRUE,
.smooth = FALSE,
.title = "Monthly discharge at Gauge 16262, Gazalkent",
.x_lab = 'date',
.y_lab = 'Discharge in cubic meters per second',
.plotly_slider = TRUE)
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year') %>%
plot_time_series(date,data,
.interactive = TRUE,
.smooth = FALSE,
.title = "Monthly discharge at Gauge 16262, Gazalkent",
.x_lab = 'date',
.y_lab = 'Discharge in cubic meters per second',
.plotly_slider = TRUE)
data %>% filter(code=='16262') %>%
collapse_by("year") %>%
group_by(date) %>%
summarize_all(sum) %>%
mutate_at(vars(-date), .funs = funs(. /10^6))
??collapse_by
install.packages('tibbletime')
library(tibbletime)
data %>% filter(code=='16262') %>%
collapse_by("year") %>%
group_by(date) %>%
summarize_all(sum) %>%
mutate_at(vars(-date), .funs = funs(. /10^6))
data %>% filter(code=='16262') %>% as_tbl_time() %>%
collapse_by("year") %>%
group_by(date) %>%
summarize_all(sum) %>%
mutate_at(vars(-date), .funs = funs(. /10^6))
data %>% filter(code=='16262') %>% as_tbl_time(date) %>%
collapse_by("year") %>%
group_by(date) %>%
summarize_all(sum) %>%
mutate_at(vars(-date), .funs = funs(. /10^6))
data %>% filter(code=='16262') %>% as_tbl_time(date) %>%
collapse_by("year")
data %>% filter(code=='16262') %>% select(date,data) %>% as_tbl_time(date) %>%
collapse_by("year")
data %>% filter(code=='16262') %>% select('date','data') %>% as_tbl_time(date) %>%
collapse_by("year") %>%
group_by(date) %>%
summarize_all(sum) %>%
mutate_at(vars(-date), .funs = funs(. /10^6))
data %>% filter(code=='16262') %>% select('date','data')
data
?select
data %>% filter(code=='16262') %>% dplyr::select('date','data') %>% as_tbl_time(date) %>%
collapse_by("year") %>%
group_by(date) %>%
summarize_all(sum) %>%
mutate_at(vars(-date), .funs = funs(. /10^6))
te <- data %>% filter(code=='16262') %>% dplyr::select('date','data') %>% as_tbl_time(date) %>%
collapse_by("year") %>%
group_by(date) %>%
summarize_all(sum) %>%
mutate_at(vars(-date), .funs = funs(. /10^6))
te
te %>% plot_time_series(date,data)
te <- data %>% filter(code=='16262') %>% dplyr::select('date','data') %>% as_tbl_time(date) %>%
collapse_by("year") %>%
group_by(date) %>%
summarize_all(sum)
te %>% plot_time_series(date,data)
#  mutate_at(vars(-date), .funs = funs(. /10^6))
te <- data %>% filter(code=='16262') %>% dplyr::select('date','data') %>% as_tbl_time(date) %>%
collapse_by("year")
te
te <- data %>% filter(code=='16262') %>% dplyr::select('date','data') %>% as_tbl_time(date) %>%
collapse_by("year") %>%
group_by(date)
te
te <- data %>% filter(code=='16262') %>% dplyr::select('date','data') %>% as_tbl_time(date) %>%
collapse_by("year") %>%
group_by(date) %>%
summarize_all(sum)
te
te <- data %>% filter(code=='16262') %>% dplyr::select('date','data') %>% as_tbl_time(date) %>%
collapse_by("year") %>%
group_by(date) %>%
summarize_all(sum)
te %>% plot_time_series(date,data)
#  mutate_at(vars(-date), .funs = funs(. /10^6))
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year') %>%
plot_time_series(date,data,
.interactive = TRUE,
.smooth = FALSE,
.title = "Monthly discharge at Gauge 16262, Gazalkent",
.x_lab = 'date',
.y_lab = 'Discharge in cubic meters per second',
.plotly_slider = TRUE)
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',sum()) %>%
plot_time_series(date,data,
.interactive = TRUE,
.smooth = FALSE,
.title = "Monthly discharge at Gauge 16262, Gazalkent",
.x_lab = 'date',
.y_lab = 'Discharge in cubic meters per second',
.plotly_slider = TRUE)
?summarize_by_time
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',annualSum=sum()) %>%
plot_time_series(date,data,
.interactive = TRUE,
.smooth = FALSE,
.title = "Monthly discharge at Gauge 16262, Gazalkent",
.x_lab = 'date',
.y_lab = 'Discharge in cubic meters per second',
.plotly_slider = TRUE)
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',annualSum=sum()) %>%
plot_time_series(date,data,
.interactive = TRUE,
)
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',annualSum=sum())
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',annualSum=sum()) %>%
plot_time_series(date,annualSum,
.interactive = TRUE,
)
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',sum())
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',value=sum(value,na.rm = TRUE)) %>%
plot_time_series(date,value,
.interactive = TRUE,
)
?sum()
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',value=sum(value,na.omit = TRUE)) %>%
plot_time_series(date,value,
.interactive = TRUE,
)
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',value=sum(value)) %>%
plot_time_series(date,value,
.interactive = TRUE,
)
na.omit()
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',value=sum(value))
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',value=sum()) %>%
plot_time_series(date,value,
.interactive = TRUE,
)
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',value=sum(na.omit=TRUE)) %>%
plot_time_series(date,value,
.interactive = TRUE,
)
?summarize_by_time
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',value=sum(data,na.omit=TRUE)) %>%
plot_time_series(date,value,
.interactive = TRUE,
)
data %>% filter(code=='16262') %>%
summarise_by_time(date,.by = 'year',value=sum(data,na.omit=TRUE)) %>%
plot_time_series(date,value,
.interactive = TRUE,
.title = "Annual discharge at Gauge 16262, Gazalkent",
.x_lab = 'date',
.y_lab = 'Discharge in cubic meters per second',
.smooth = FALSE)
servr::daemon_list()
?servr::daemon_list()
knitr::opts_chunk$set(echo = TRUE)
servr::daemon_list()
servr::daemon_stop(which = servr::daemon_list())
servr::daemon_list()
knitr::opts_chunk$set(echo = TRUE)
options(knitr.duplicate.label = "allow")
bookdown:::serve_book()
install.packages(c("codetools", "lava", "rasterVis", "V8"))
